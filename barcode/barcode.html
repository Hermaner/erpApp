<!DOCTYPE HTML>
<html>

	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
		<meta name="HandheldFriendly" content="true" />
		<meta name="MobileOptimized" content="320" />
		<title>扫描清单</title>
		<script type="text/javascript" src="../js/mui.min.js"></script>
		<script type="text/javascript" src="../js/common.js"></script>
		<link rel="stylesheet" href="../css/mui.css" type="text/css" charset="utf-8" />
		<link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />
		<style type="text/css" media="screen">
		</style>
	</head>

	<body onload="img=document.getElementById('bimg');">
		<header class="mui-bar mui-bar-nav">
			<a class="mui-action-back mui-icon mui-icon-left-nav mui-pull-left"></a>
			<h1 class="mui-title">扫描 </h1>
		</header>
		<div id="dcontent" class="dcontent">

			<div class="button barcode_btn" href="barcode_scan.html">扫一扫</div>
			<br/>
			<ul id="history" class="dlist" style="text-align:left;">
				<li id="nohistory" class="ditem" onclick="onempty();">无历史记录 </li>
			</ul>
			<br/>
			<!--<div class="button button-waring" onclick="cleanHistroy();">清空历史记录</div>-->
		</div>
		<!--<div id="output">
Barcode提供二维码扫描识别功能，支持调用摄像头即时扫描二维码，也可直接输入图片进行扫描识别。
		</div>-->
	</body>
	<script type="text/javascript">
		clickedFn('#dcontent', '.button')
		var blist = [];

		function scaned(t, r, f) {
			var li = null,
				s = 0,
				hl = document.getElementById("history");
			if (blist.length > 0) {
				mui(".hdata").each(function() {
					var v = this.innerHTML;
					if (r.length > 0 && r == v) { 
						var c = parseInt(this.nextSibling.innerHTML);
						c += 1;
						this.nextSibling.innerHTML = c;
						s = 1
						return;
					}
				}) 
				if (!s) {
					li = document.createElement("li");
					li.className = "ditem";
					hl.insertBefore(li, hl.childNodes[0]);
					li.id = blist.length;
					var html = '<div class="hdata">';
					html += r;
					html += '</div><div class="mylicount">1</div>';
					li.innerHTML = html;
					blist[blist.length] = r;
					
				}
			} else {
				li = document.getElementById("nohistory");
				li.id = blist.length;
				var html = '<div class="hdata">';
				html += r;
				html += '</div><div class="mylicount">1</div>';
				li.innerHTML = html;
				blist[blist.length] = r;
			}
		}
	</script>

</html>